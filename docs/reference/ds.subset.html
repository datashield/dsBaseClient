<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generates a valid subset of a table or a vector — ds.subset • dsBaseClient</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generates a valid subset of a table or a vector — ds.subset"><meta property="og:description" content="The function uses the R classical subsetting with squared brackets '[]' and allows also to
subset using a logical operator and a threshold. The object to subset from must be a vector (factor, numeric
or character) or a table (data.frame or matrix)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dsBaseClient</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">6.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generates a valid subset of a table or a vector</h1>

    <div class="hidden name"><code>ds.subset.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function uses the R classical subsetting with squared brackets '[]' and allows also to
subset using a logical operator and a threshold. The object to subset from must be a vector (factor, numeric
or character) or a table (data.frame or matrix).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ds.subset</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset <span class="op">=</span> <span class="st">"subsetObject"</span>,</span>
<span>  completeCases <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rows <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  logicalOperator <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  threshold <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  datasources <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a character, the name of the dataframe or the factor vector and the range of the subset.</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>the name of the output object, a list that holds the subset object. If set to NULL
the default name of this list is 'subsetObject'</p></dd>


<dt id="arg-completecases">completeCases<a class="anchor" aria-label="anchor" href="#arg-completecases"></a></dt>
<dd><p>a character that tells if only complete cases should be included or not.</p></dd>


<dt id="arg-rows">rows<a class="anchor" aria-label="anchor" href="#arg-rows"></a></dt>
<dd><p>a vector of integers, the indices of the rows to extract.</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p>a vector of integers or a vector of characters; the indices of the columns to extract or their names.</p></dd>


<dt id="arg-logicaloperator">logicalOperator<a class="anchor" aria-label="anchor" href="#arg-logicaloperator"></a></dt>
<dd><p>a boolean, the logical parameter to use if the user wishes to subset a vector using a logical
operator. This parameter is ignored if the input data is not a vector.</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>a numeric, the threshold to use in conjunction with the logical parameter. This parameter is ignored
if the input data is not a vector.</p></dd>


<dt id="arg-datasources">datasources<a class="anchor" aria-label="anchor" href="#arg-datasources"></a></dt>
<dd><p>a list of <code><a href="https://datashield.github.io/DSI/reference/DSConnection-class.html" class="external-link">DSConnection-class</a></code> objects obtained after login. If the &lt;datasources&gt;
the default set of connections will be used: see <a href="https://datashield.github.io/DSI/reference/datashield.connections_default.html" class="external-link">datashield.connections_default</a>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>no data are return to the user, the generated subset dataframe is stored on the server side.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>(1) If the input data is a table the user specifies the rows and/or columns to include in the subset; the columns can be
referred to by their names. Table subsetting can also be done using the name of a variable and a threshold (see example 3).
(2) If the input data is a vector and the parameters 'rows', 'logical' and 'threshold' are all provided the last two are ignored
(i.e. 'rows' has precedence over the other two parameters then).
IMPORTANT NOTE: If the requested subset is not valid (i.e. contains less than the allowed number of observations) all the values are
turned into missing values (NA). Hence an invalid subset is indicated by the fact that all values within it are set to NA.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="ds.subsetByClass.html">ds.subsetByClass</a> to subset by the classes of factor vector(s).</p>
<p><a href="ds.meanByClass.html">ds.meanByClass</a> to compute mean and standard deviation across categories of a factor vectors.</p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Gaye, A.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># load the login data</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">logindata</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># login and assign some variables to R</span></span></span>
<span class="r-in"><span>  <span class="va">myvar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"DIS_DIAB"</span>,<span class="st">"PM_BMI_CONTINUOUS"</span>,<span class="st">"LAB_HDL"</span>, <span class="st">"GENDER"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">conns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.login.html" class="external-link">datashield.login</a></span><span class="op">(</span>logins<span class="op">=</span><span class="va">logindata</span>,assign<span class="op">=</span><span class="cn">TRUE</span>,variables<span class="op">=</span><span class="va">myvar</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Example 1: generate a subset of the assigned dataframe (by default the table is named 'D')</span></span></span>
<span class="r-in"><span>  <span class="co"># with complete cases only</span></span></span>
<span class="r-in"><span>  <span class="fu">ds.subset</span><span class="op">(</span>x<span class="op">=</span><span class="st">'D'</span>, subset<span class="op">=</span><span class="st">'subD1'</span>, completeCases<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># display the dimensions of the initial table ('D') and those of the subset table ('subD1')</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="ds.dim.html">ds.dim</a></span><span class="op">(</span><span class="st">'D'</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="ds.dim.html">ds.dim</a></span><span class="op">(</span><span class="st">'subD1'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Example 2: generate a subset of the assigned table (by default the table is named 'D')</span></span></span>
<span class="r-in"><span>  <span class="co"># with only the variables</span></span></span>
<span class="r-in"><span>  <span class="co"># DIS_DIAB' and'PM_BMI_CONTINUOUS' specified by their name.</span></span></span>
<span class="r-in"><span>  <span class="fu">ds.subset</span><span class="op">(</span>x<span class="op">=</span><span class="st">'D'</span>, subset<span class="op">=</span><span class="st">'subD2'</span>, cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'DIS_DIAB'</span>,<span class="st">'PM_BMI_CONTINUOUS'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Example 3: generate a subset of the table D with bmi values greater than or equal to 25.</span></span></span>
<span class="r-in"><span>  <span class="fu">ds.subset</span><span class="op">(</span>x<span class="op">=</span><span class="st">'D'</span>, subset<span class="op">=</span><span class="st">'subD3'</span>, logicalOperator<span class="op">=</span><span class="st">'PM_BMI_CONTINUOUS&gt;='</span>, threshold<span class="op">=</span><span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Example 4: get the variable 'PM_BMI_CONTINUOUS' from the dataframe 'D' and generate a</span></span></span>
<span class="r-in"><span>  <span class="co"># subset bmi</span></span></span>
<span class="r-in"><span>  <span class="co"># vector with bmi values greater than or equal to 25</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="ds.assign.html">ds.assign</a></span><span class="op">(</span>toAssign<span class="op">=</span><span class="st">'D$PM_BMI_CONTINUOUS'</span>, newobj<span class="op">=</span><span class="st">'BMI'</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">ds.subset</span><span class="op">(</span>x<span class="op">=</span><span class="st">'BMI'</span>, subset<span class="op">=</span><span class="st">'BMI25plus'</span>, logicalOperator<span class="op">=</span><span class="st">'&gt;='</span>, threshold<span class="op">=</span><span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Example 5: subsetting by rows:</span></span></span>
<span class="r-in"><span>  <span class="co"># get the logarithmic values of the variable 'lab_hdl' and generate a subset with</span></span></span>
<span class="r-in"><span>  <span class="co"># the first 50 observations of that new vector. If the specified number of row is</span></span></span>
<span class="r-in"><span>  <span class="co"># greater than the total</span></span></span>
<span class="r-in"><span>  <span class="co"># number of rows in any of the studies the process will stop.</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="ds.assign.html">ds.assign</a></span><span class="op">(</span>toAssign<span class="op">=</span><span class="st">'log(D$LAB_HDL)'</span>, newobj<span class="op">=</span><span class="st">'logHDL'</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">ds.subset</span><span class="op">(</span>x<span class="op">=</span><span class="st">'logHDL'</span>, subset<span class="op">=</span><span class="st">'subLAB_HDL'</span>, rows<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># now get a subset of the table 'D' with just the 100 first observations</span></span></span>
<span class="r-in"><span>  <span class="fu">ds.subset</span><span class="op">(</span>x<span class="op">=</span><span class="st">'D'</span>, subset<span class="op">=</span><span class="st">'subD5'</span>, rows<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># clear the Datashield R sessions and logout</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.logout.html" class="external-link">datashield.logout</a></span><span class="op">(</span><span class="va">conns</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Paul Burton, Rebecca Wilson, Olly Butters, Patricia Ryser-Welch, Alex Westerberg, Leire Abarrategui, Roberto Villegas-Diaz, Demetris Avraam, Demetris Avraam, Yannick Marcon, Tom Bishop, Amadou Gaye, Xavier Escribà-Montagut, Stuart Wheater.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

