<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Sub-sets data frames in the server-side — ds.dataFrameSubset • dsBaseClient</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Sub-sets data frames in the server-side — ds.dataFrameSubset"><meta property="og:description" content="Subsets a data frame by rows and/or by columns."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dsBaseClient</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">6.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sub-sets data frames in the server-side</h1>

    <div class="hidden name"><code>ds.dataFrameSubset.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Subsets a data frame by rows and/or by columns.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ds.dataFrameSubset</span><span class="op">(</span></span>
<span>  df.name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  V1.name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  V2.name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Boolean.operator <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep.cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rm.cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep.NAs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  newobj <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  datasources <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  notify.of.progress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-df-name">df.name<a class="anchor" aria-label="anchor" href="#arg-df-name"></a></dt>
<dd><p>a character string providing the name of the data frame to be subseted.</p></dd>


<dt id="arg-v-name">V1.name<a class="anchor" aria-label="anchor" href="#arg-v-name"></a></dt>
<dd><p>A character string specifying the name of the vector
to which the Boolean operator is to be applied to define the subset.
For more information see details.</p></dd>


<dt id="arg-v-name">V2.name<a class="anchor" aria-label="anchor" href="#arg-v-name"></a></dt>
<dd><p>A character string specifying the name of the vector to compare
with <code>V1.name</code>.</p></dd>


<dt id="arg-boolean-operator">Boolean.operator<a class="anchor" aria-label="anchor" href="#arg-boolean-operator"></a></dt>
<dd><p>A character string specifying one of six possible Boolean operators:
<code>'==', '!=', '&gt;', '&gt;=', '&lt;'</code> and <code>'&lt;='</code>.</p></dd>


<dt id="arg-keep-cols">keep.cols<a class="anchor" aria-label="anchor" href="#arg-keep-cols"></a></dt>
<dd><p>a numeric vector specifying the numbers of the columns to be kept in the
final subset.</p></dd>


<dt id="arg-rm-cols">rm.cols<a class="anchor" aria-label="anchor" href="#arg-rm-cols"></a></dt>
<dd><p>a numeric vector specifying the numbers of the columns to be removed from
the final subset.</p></dd>


<dt id="arg-keep-nas">keep.NAs<a class="anchor" aria-label="anchor" href="#arg-keep-nas"></a></dt>
<dd><p>logical, if TRUE the missing values are included in the subset.
If FALSE or NULL all rows with at least one missing values are removed from the subset.</p></dd>


<dt id="arg-newobj">newobj<a class="anchor" aria-label="anchor" href="#arg-newobj"></a></dt>
<dd><p>a character string that provides the name for the output
object that is stored on the data servers. Default <code>dataframesubset.newobj</code>.</p></dd>


<dt id="arg-datasources">datasources<a class="anchor" aria-label="anchor" href="#arg-datasources"></a></dt>
<dd><p>a list of <code><a href="https://datashield.github.io/DSI/reference/DSConnection-class.html" class="external-link">DSConnection-class</a></code> objects obtained after login.
If the <code>datasources</code>
the default set of connections will be used: see <code><a href="https://datashield.github.io/DSI/reference/datashield.connections_default.html" class="external-link">datashield.connections_default</a></code>.</p></dd>


<dt id="arg-notify-of-progress">notify.of.progress<a class="anchor" aria-label="anchor" href="#arg-notify-of-progress"></a></dt>
<dd><p>specifies if console output should be produced to indicate
progress. Default FALSE.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>ds.dataFrameSubset</code> returns
the object specified by the <code>newobj</code> argument
which is written to the server-side.
Also, two validity messages are returned to the client-side indicating
the name of the <code>newobj</code> which has been created in each data source
 and if it is in a valid form.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Subset a pre-existing data frame using the standard
set of Boolean operators (<code>==, !=, &gt;, &gt;=, &lt;, &lt;=</code>).
The  subsetting is made by rows, but it is also possible to select
columns to keep or remove. Instead, if you
wish to keep all rows in the subset (e.g. if the primary plan is to subset by columns
and not by rows) the <code>V1.name</code> and <code>V2.name</code> parameters can be used
to specify a vector of the same length
as the data frame to be subsetted in each study in which every element is 1 and
there are no missing values. For more information see the example 2 below.</p>
<p>Server functions called: <code>dataFrameSubsetDS1</code> and <code>dataFrameSubsetDS2</code></p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>DataSHIELD Development Team</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co">## Version 6, for version 5 see the Wiki</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># connecting to the Opal servers</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/datashield/DSI/" class="external-link">'DSI'</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/datashield/DSOpal/" class="external-link">'DSOpal'</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st">'dsBaseClient'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">builder</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/newDSLoginBuilder.html" class="external-link">newDSLoginBuilder</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span>server <span class="op">=</span> <span class="st">"study1"</span>, </span></span>
<span class="r-in"><span>                 url <span class="op">=</span> <span class="st">"http://192.168.56.100:8080/"</span>, </span></span>
<span class="r-in"><span>                 user <span class="op">=</span> <span class="st">"administrator"</span>, password <span class="op">=</span> <span class="st">"datashield_test&amp;"</span>, </span></span>
<span class="r-in"><span>                 table <span class="op">=</span> <span class="st">"CNSIM.CNSIM1"</span>, driver <span class="op">=</span> <span class="st">"OpalDriver"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span>server <span class="op">=</span> <span class="st">"study2"</span>, </span></span>
<span class="r-in"><span>                 url <span class="op">=</span> <span class="st">"http://192.168.56.100:8080/"</span>, </span></span>
<span class="r-in"><span>                 user <span class="op">=</span> <span class="st">"administrator"</span>, password <span class="op">=</span> <span class="st">"datashield_test&amp;"</span>, </span></span>
<span class="r-in"><span>                 table <span class="op">=</span> <span class="st">"CNSIM.CNSIM2"</span>, driver <span class="op">=</span> <span class="st">"OpalDriver"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span>server <span class="op">=</span> <span class="st">"study3"</span>,</span></span>
<span class="r-in"><span>                 url <span class="op">=</span> <span class="st">"http://192.168.56.100:8080/"</span>, </span></span>
<span class="r-in"><span>                 user <span class="op">=</span> <span class="st">"administrator"</span>, password <span class="op">=</span> <span class="st">"datashield_test&amp;"</span>, </span></span>
<span class="r-in"><span>                 table <span class="op">=</span> <span class="st">"CNSIM.CNSIM3"</span>, driver <span class="op">=</span> <span class="st">"OpalDriver"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">logindata</span> <span class="op">&lt;-</span> <span class="va">builder</span><span class="op">$</span><span class="fu">build</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="va">connections</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.login.html" class="external-link">datashield.login</a></span><span class="op">(</span>logins <span class="op">=</span> <span class="va">logindata</span>, assign <span class="op">=</span> <span class="cn">TRUE</span>, symbol <span class="op">=</span> <span class="st">"D"</span><span class="op">)</span> </span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># Subsetting a data frame</span></span></span>
<span class="r-in"><span>  <span class="co">#Example 1: Include some rows and all columns in the subset</span></span></span>
<span class="r-in"><span>  <span class="fu">ds.dataFrameSubset</span><span class="op">(</span>df.name <span class="op">=</span> <span class="st">"D"</span>,</span></span>
<span class="r-in"><span>                     V1.name <span class="op">=</span> <span class="st">"D$LAB_TSC"</span>,</span></span>
<span class="r-in"><span>                     V2.name <span class="op">=</span> <span class="st">"D$LAB_TRIG"</span>,</span></span>
<span class="r-in"><span>                     Boolean.operator <span class="op">=</span> <span class="st">"&gt;"</span>,</span></span>
<span class="r-in"><span>                     keep.cols <span class="op">=</span> <span class="cn">NULL</span>, <span class="co">#All columns are included in the new subset</span></span></span>
<span class="r-in"><span>                     rm.cols <span class="op">=</span> <span class="cn">NULL</span>, <span class="co">#All columns are included in the new subset</span></span></span>
<span class="r-in"><span>                     keep.NAs <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co">#All rows with NAs are removed</span></span></span>
<span class="r-in"><span>                     newobj <span class="op">=</span> <span class="st">"new.subset"</span>,</span></span>
<span class="r-in"><span>                     datasources <span class="op">=</span> <span class="va">connections</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,<span class="co">#only the first server is used ("study1")</span></span></span>
<span class="r-in"><span>                     notify.of.progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co">#Example 2: Include all rows and some columns in the new subset</span></span></span>
<span class="r-in"><span>    <span class="co">#Select complete cases (rows without NA)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="ds.completeCases.html">ds.completeCases</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="st">"D"</span>,</span></span>
<span class="r-in"><span>                     newobj <span class="op">=</span> <span class="st">"complet"</span>,</span></span>
<span class="r-in"><span>                     datasources <span class="op">=</span> <span class="va">connections</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co">#Create a vector with all ones</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="ds.make.html">ds.make</a></span><span class="op">(</span>toAssign <span class="op">=</span> <span class="st">"complet$LAB_TSC-complet$LAB_TSC+1"</span>,</span></span>
<span class="r-in"><span>            newobj <span class="op">=</span> <span class="st">"ONES"</span>,</span></span>
<span class="r-in"><span>            datasources <span class="op">=</span> <span class="va">connections</span><span class="op">)</span> </span></span>
<span class="r-in"><span>    <span class="co">#Subset the data</span></span></span>
<span class="r-in"><span>    <span class="fu">ds.dataFrameSubset</span><span class="op">(</span>df.name <span class="op">=</span> <span class="st">"complet"</span>,</span></span>
<span class="r-in"><span>                       V1.name <span class="op">=</span> <span class="st">"ONES"</span>,</span></span>
<span class="r-in"><span>                       V2.name <span class="op">=</span> <span class="st">"ONES"</span>,</span></span>
<span class="r-in"><span>                       Boolean.operator <span class="op">=</span> <span class="st">"=="</span>,</span></span>
<span class="r-in"><span>                       keep.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,<span class="fl">10</span><span class="op">)</span>, <span class="co">#only columns 1, 2, 3, 4 and 10 are selected</span></span></span>
<span class="r-in"><span>                       rm.cols <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                       keep.NAs <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                       newobj <span class="op">=</span> <span class="st">"subset.all.rows"</span>,</span></span>
<span class="r-in"><span>                       datasources <span class="op">=</span> <span class="va">connections</span>, <span class="co">#all servers are used</span></span></span>
<span class="r-in"><span>                       notify.of.progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>                </span></span>
<span class="r-in"><span>                     </span></span>
<span class="r-in"><span>  <span class="co"># Clear the Datashield R sessions and logout                 </span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.logout.html" class="external-link">datashield.logout</a></span><span class="op">(</span><span class="va">connections</span><span class="op">)</span> </span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }   </span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Paul Burton, Rebecca Wilson, Olly Butters, Patricia Ryser-Welch, Alex Westerberg, Leire Abarrategui, Roberto Villegas-Diaz, Demetris Avraam, Yannick Marcon, Stuart Wheater.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

