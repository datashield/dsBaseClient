language: r
sudo: required
dist: trusty
before_install:
    - wget -nv https://apt.puppetlabs.com/puppetlabs-release-pc1-trusty.deb
    - sudo dpkg -i puppetlabs-release-pc1-trusty.deb
    - sudo rm -f puppetlabs-release-pc1-trusty.deb
	- sudo apt-get update -qq
	- sudo apt-get install -qq [puppet-agent, git] -y
    - sudo /opt/puppetlabs/gem install r10k
    - ln -s /opt/puppetlabs/puppet/bin/r10k /opt/puppetlabs/bin/r10k
    - git clone https://github.com/nparley/datashield.git /tmp/datashield
    - cd /tmp/datashield/puppet/environments/test && r10k puppetfile install
    - sudo puppet apply site.pp --environment test --environmentpath /tmp/datashield/puppet/environments

# Github packages
r_github_packages:
 - datashield/opal
 


