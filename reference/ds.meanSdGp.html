<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Computes the mean and standard deviation across groups defined by one factor — ds.meanSdGp • dsBaseClient</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Computes the mean and standard deviation across groups defined by one factor — ds.meanSdGp"><meta property="og:description" content="This function calculates the mean and SD of a continuous variable for each class of
a single factor."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dsBaseClient</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">6.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Computes the mean and standard deviation across groups defined by one factor</h1>

    <div class="hidden name"><code>ds.meanSdGp.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function calculates the mean and SD of a continuous variable for each class of
a single factor.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ds.meanSdGp</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"both"</span>,</span>
<span>  do.checks <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  datasources <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a character string specifying the name of a numeric continuous
variable.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>a character string specifying the name of a categorical
variable of class factor.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>a character string that represents the type of analysis to carry out.
This can be set as: <code>"combine"</code>, <code>"split"</code> or <code>"both"</code>.
Default <code>"both"</code>.
For more information see <strong>Details</strong>.</p></dd>


<dt id="arg-do-checks">do.checks<a class="anchor" aria-label="anchor" href="#arg-do-checks"></a></dt>
<dd><p>logical. If TRUE the administrative checks
are undertaken to ensure that the input objects are defined in all studies and that the
variables are of equivalent class in each study.
Default is FALSE to save time.</p></dd>


<dt id="arg-datasources">datasources<a class="anchor" aria-label="anchor" href="#arg-datasources"></a></dt>
<dd><p>a list of <code><a href="https://datashield.github.io/DSI/reference/DSConnection-class.html" class="external-link">DSConnection-class</a></code>
objects obtained after login. If the <code>datasources</code> argument is not specified
the default set of connections will be used: see <code><a href="https://datashield.github.io/DSI/reference/datashield.connections_default.html" class="external-link">datashield.connections_default</a></code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>ds.meanSdGp</code> returns to the client-side the mean, SD, Nvalid and SEM combined
across studies and/or separately for each study, depending on the argument <code>type</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function calculates the mean, standard deviation (SD), N (number of observations)
and the standard error of the mean (SEM) of a continuous variable broken down into subgroups
defined by a single factor.</p>
<p>There are important differences between <code>ds.meanSdGp</code> function compared to
the function <code>ds.meanByClass</code>:</p>
<p>(A) <code>ds.meanSdGp</code> does not actually subset the data it simply calculates the required statistics
and reports them. This means you cannot use this function if you wish to physically break the
data into subsets. On the other hand, it makes the function very much faster than <code>ds.meanByClass</code>
if you do not need to create physical subsets. <br>
(B) <code>ds.meanByClass</code> allows you to specify up to
three categorising factors, but <code>ds.meanSdGp</code> only allows one. However, this is not a serious
problem. If you have two factors (e.g. sex with two levels <code>[0,1]</code> and <code>BMI.categorical</code> with
three levels <code>[1,2,3]</code>) you simply need to create a new factor that combines the two together in a
way that gives each combination of levels a different value in the new factor. So, in the
example given, the calculation <code>newfactor = (3*sex) + BMI</code> gives you six values: <br>
(1) <code>sex = 0</code> and <code>BMI = 1</code> -&gt; <code>newfactor = 1</code> <br>
(2) <code>sex = 0</code> and <code>BMI = 2</code> -&gt; <code>newfactor = 2</code> <br>
(3) <code>sex = 0</code> and <code>BMI = 3</code> -&gt; <code>newfactor = 3</code> <br>
(4) <code>sex = 1</code> and <code>BMI = 1</code> -&gt; <code>newfactor = 4</code> <br>
(5) <code>sex = 1</code> and <code>BMI = 2</code> -&gt; <code>newfactor = 5</code> <br>
(6) <code>sex = 1</code> and <code>BMI = 3</code> -&gt; <code>newfactor = 6</code> <br></p>
<p>(C) At present, <code>ds.meanByClass</code> calculates the sample size in each group to mean the
total sample size (i.e. it
includes all observations in each group regardless of whether or not they include missing values
for the continuous variable or the factor). The calculation of sample size in each group by
<code>ds.meanSdGp</code> always reports the number of observations that are non-missing both for the
continuous variable and the factor. This makes sense - in the case of <code>ds.meanByClass</code>,
the total size of the physical subsets was important,
but when it comes down only to <code>ds.meanSdGp</code> which
undertakes analysis without physical subsetting,  it is only the observations with non-missing
values in both variables that contribute to the calculation of means and SDs within each group
and so it is logical to consider those counts as primary. The only reference <code>ds.meanSdGp</code> makes
to missing counts is in the reporting of <code>Ntotal</code> and <code>Nmissing</code> overall (ie not broken down by
group).</p>
<p>For the future, we plan to extend <code>ds.meanByClass</code> to report both total and non-missing
counts in subgroups.</p>
<p>Depending on the variable <code>type</code> can be carried out different analysis:<br>
(1) <code>"combine"</code>: a pooled table of results is generated. <br>
(2) <code>"split"</code> a table of results is generated for each study. <br>
(3) <code>"both"</code> both sets of outputs are produced.</p>
<p>Server function called: <code>meanSdGpDS</code></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="ds.subsetByClass.html">ds.subsetByClass</a></code> to subset by the classes of factor vector(s).</p>
<p><code><a href="ds.subset.html">ds.subset</a></code> to subset by complete cases (i.e. removing missing values), threshold,
columns and rows.</p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>DataSHIELD Development Team</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co">## Version 6, for version 5 see the Wiki</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># connecting to the Opal servers</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/datashield/DSI/" class="external-link">'DSI'</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/datashield/DSOpal/" class="external-link">'DSOpal'</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st">'dsBaseClient'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">builder</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/newDSLoginBuilder.html" class="external-link">newDSLoginBuilder</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span>server <span class="op">=</span> <span class="st">"study1"</span>, </span></span>
<span class="r-in"><span>                 url <span class="op">=</span> <span class="st">"http://192.168.56.100:8080/"</span>, </span></span>
<span class="r-in"><span>                 user <span class="op">=</span> <span class="st">"administrator"</span>, password <span class="op">=</span> <span class="st">"datashield_test&amp;"</span>, </span></span>
<span class="r-in"><span>                 table <span class="op">=</span> <span class="st">"SURVIVAL.EXPAND_NO_MISSING1"</span>, driver <span class="op">=</span> <span class="st">"OpalDriver"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span>server <span class="op">=</span> <span class="st">"study2"</span>, </span></span>
<span class="r-in"><span>                 url <span class="op">=</span> <span class="st">"http://192.168.56.100:8080/"</span>, </span></span>
<span class="r-in"><span>                 user <span class="op">=</span> <span class="st">"administrator"</span>, password <span class="op">=</span> <span class="st">"datashield_test&amp;"</span>, </span></span>
<span class="r-in"><span>                 table <span class="op">=</span> <span class="st">"SURVIVAL.EXPAND_NO_MISSING2"</span>, driver <span class="op">=</span> <span class="st">"OpalDriver"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span>server <span class="op">=</span> <span class="st">"study3"</span>,</span></span>
<span class="r-in"><span>                 url <span class="op">=</span> <span class="st">"http://192.168.56.100:8080/"</span>, </span></span>
<span class="r-in"><span>                 user <span class="op">=</span> <span class="st">"administrator"</span>, password <span class="op">=</span> <span class="st">"datashield_test&amp;"</span>, </span></span>
<span class="r-in"><span>                 table <span class="op">=</span> <span class="st">"SURVIVAL.EXPAND_NO_MISSING3"</span>, driver <span class="op">=</span> <span class="st">"OpalDriver"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">logindata</span> <span class="op">&lt;-</span> <span class="va">builder</span><span class="op">$</span><span class="fu">build</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="va">connections</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.login.html" class="external-link">datashield.login</a></span><span class="op">(</span>logins <span class="op">=</span> <span class="va">logindata</span>, assign <span class="op">=</span> <span class="cn">TRUE</span>, symbol <span class="op">=</span> <span class="st">"D"</span><span class="op">)</span> </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#Example 1: Calculate the mean, SD, Nvalid and SEM of the continuous variable age.60 (age in</span></span></span>
<span class="r-in"><span>  <span class="co">#years centralised at 60), broken down by time.id (a six level factor relating to survival time)</span></span></span>
<span class="r-in"><span>  <span class="co">#and report the pooled results combined across studies.</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span>  <span class="fu">ds.meanSdGp</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"D$age.60"</span>,</span></span>
<span class="r-in"><span>              y <span class="op">=</span> <span class="st">"D$time.id"</span>,</span></span>
<span class="r-in"><span>              type <span class="op">=</span> <span class="st">"combine"</span>,</span></span>
<span class="r-in"><span>              do.checks <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>              datasources <span class="op">=</span> <span class="va">connections</span><span class="op">)</span></span></span>
<span class="r-in"><span>              </span></span>
<span class="r-in"><span>  <span class="co">#Example 2: Calculate the mean, SD, Nvalid and SEM of the continuous variable age.60 (age in</span></span></span>
<span class="r-in"><span>  <span class="co">#years centralised at 60), broken down by time.id (a six level factor relating to survival time)</span></span></span>
<span class="r-in"><span>  <span class="co">#and report both study-specific results and the pooled results combined across studies.</span></span></span>
<span class="r-in"><span>  <span class="co">#Save the returned output to msg.b.</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="fu">ds.meanSdGp</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"D$age.60"</span>,</span></span>
<span class="r-in"><span>              y <span class="op">=</span> <span class="st">"D$time.id"</span>,</span></span>
<span class="r-in"><span>              type <span class="op">=</span> <span class="st">"both"</span>,</span></span>
<span class="r-in"><span>              do.checks <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>              datasources <span class="op">=</span> <span class="va">connections</span><span class="op">)</span>  </span></span>
<span class="r-in"><span>             </span></span>
<span class="r-in"><span>  <span class="co"># clear the Datashield R sessions and logout</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.logout.html" class="external-link">datashield.logout</a></span><span class="op">(</span><span class="va">connections</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Paul Burton, Rebecca Wilson, Olly Butters, Patricia Ryser-Welch, Alex Westerberg, Leire Abarrategui, Roberto Villegas-Diaz, Demetris Avraam, Demetris Avraam, Yannick Marcon, Tom Bishop, Amadou Gaye, Xavier Escribà-Montagut, Stuart Wheater.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

